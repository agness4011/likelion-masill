<!DOCTYPE html>
<html>
<head>
    <title>JWT Token Checker</title>
</head>
<body>
    <h2>JWT 토큰 유효 기간 확인</h2>
    <textarea id="token" rows="4" cols="80" placeholder="JWT 토큰을 여기에 붙여넣으세요"></textarea>
    <br><br>
    <button onclick="checkToken()">토큰 확인</button>
    <div id="result"></div>

    <script>
        function checkToken() {
            const token = document.getElementById('token').value.trim();
            if (!token) {
                alert('토큰을 입력해주세요');
                return;
            }

            try {
                // JWT 토큰의 두 번째 부분(Payload) 추출
                const parts = token.split('.');
                if (parts.length !== 3) {
                    throw new Error('유효하지 않은 JWT 토큰입니다');
                }

                // Base64 디코딩
                const payload = JSON.parse(atob(parts[1]));
                
                const now = Math.floor(Date.now() / 1000);
                const issuedAt = new Date(payload.iat * 1000);
                const expiresAt = new Date(payload.exp * 1000);
                const isExpired = now > payload.exp;
                const remainingTime = payload.exp - now;

                let result = `
                    <h3>토큰 정보:</h3>
                    <p><strong>발급 시간:</strong> ${issuedAt.toLocaleString()}</p>
                    <p><strong>만료 시간:</strong> ${expiresAt.toLocaleString()}</p>
                    <p><strong>현재 상태:</strong> <span style="color: ${isExpired ? 'red' : 'green'}">${isExpired ? '만료됨' : '유효함'}</span></p>
                `;

                if (!isExpired) {
                    const hours = Math.floor(remainingTime / 3600);
                    const minutes = Math.floor((remainingTime % 3600) / 60);
                    const seconds = remainingTime % 60;
                    result += `<p><strong>남은 시간:</strong> ${hours}시간 ${minutes}분 ${seconds}초</p>`;
                }

                result += `<h3>전체 Payload:</h3><pre>${JSON.stringify(payload, null, 2)}</pre>`;
                
                document.getElementById('result').innerHTML = result;
            } catch (error) {
                document.getElementById('result').innerHTML = `<p style="color: red;">오류: ${error.message}</p>`;
            }
        }
    </script>
</body>
</html>

